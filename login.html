<!DOCTYPE html>
<html>
  <head>
    <title>Apple Music Authorization</title>
    <script src="https://js-cdn.music.apple.com/musickit/v3/musickit.js" data-web-components async></script>
    <meta
      name="apple-music-developer-token"
      content="eyJhbGciOiJFUzI1NiIsImtpZCI6IjY5TTRYQkRENlIiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MTY2MjYyOTAsImlhdCI6MTcxNjYyMjY5MCwiaXNzIjoiRzZCODJCSFZBWCJ9.VqvpDQX5SwEAfr_LrSfmXkDO9SdHbr_GiZhmHDC7GZf5Ip5a6L6kAG5olaEpsqDomdmJgLjCRitekx1GV8ObsA"
    />
    <meta name="apple-music-app-name" content="My Cool Web App" />
    <meta name="apple-music-app-build" content="1978.4.1" />
  </head>
  <body>
    <button onclick="authorizeAppleMusic()">Authorize Apple Music</button>

    <script>
      // Function to authorize Apple Music
      async function authorizeAppleMusic() {
        let music = MusicKit.getInstance()

        music.authorize().then(function (response) {
          console.log(response)
        })
        // const music = MusicKit.getInstance()
        // const musicUserToken = await music.authorize()
        // console.log('aaaaaa')
        // console.log('Music User Token:', musicUserToken)
      }

      document.addEventListener('musickitloaded', async function () {
        try {
          MusicKit.configure({
            developerToken:
              'eyJhbGciOiJFUzI1NiIsImtpZCI6IjY5TTRYQkRENlIiLCJ0eXAiOiJKV1QifQ.eyJleHAiOjE3MTY2MjYyOTAsImlhdCI6MTcxNjYyMjY5MCwiaXNzIjoiRzZCODJCSFZBWCJ9.VqvpDQX5SwEAfr_LrSfmXkDO9SdHbr_GiZhmHDC7GZf5Ip5a6L6kAG5olaEpsqDomdmJgLjCRitekx1GV8ObsA', // Replace with your actual developer token
            app: {
              name: 'Your App Name',
              build: '1.0',
            },
          })
        } catch (err) {}

        let music = MusicKit.getInstance()

        music.authorize().then(function (response) {
          console.log(response)
        })

        // const music = MusicKit.getInstance()
        // await music
        //   .authorize()
        //   .then(musicUserToken => {
        //     console.log('Music User Token:', musicUserToken)
        //   })
        //   .catch(error => {
        //     console.error('Authorization failed:', error)
        //   })
      })
    </script>
  </body>
</html>
